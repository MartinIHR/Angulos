<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Angulos</title>
</head>
<body>
  <h1>¬°Adivina el Angulo!</h1>
  <p>Observa el angulo dibujado y adivina cu√°ntos grados mide</p>
  <p>El angulo que cuenta es la parte marcada con azul!</p>
  <p>Intenta acertar dentro de un margen de 5¬∞</p>
  <canvas id="canvas" width="300" height="300"></canvas>
  <form id="guessForm">
    <label for="guess">¬øCu√°ntos grados crees que es el √°ngulo?</label><br>
    <input type="number" id="guess" min="1" max="360" required>
    <button type="submit">Comprobar</button>
  </form>
  <div class="result" id="result"></div>
  <button id="newAngle" style="display:none;">Nuevo √Ångulo</button>
  <ul id="attempts" style="list-style:none; padding:0;"></ul>
  <script>
    let currentAngle = 0;
    let attempts = [];
    const maxAttempts = 5;

    function drawAngle(angle) {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const cx = canvas.width / 2;
      const cy = canvas.height / 2;
      const radius = 110;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Linea base (0¬∞)
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.lineTo(cx + radius, cy);
      ctx.strokeStyle = '#3a3a3a';
      ctx.lineWidth = 3;
      ctx.stroke();

      // Linea del angulo
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      const angleRad = angle * Math.PI / 180;
      ctx.lineTo(cx + radius * Math.cos(angleRad), cy + radius * Math.sin(angleRad));
      ctx.strokeStyle = '#e74c3c';
      ctx.lineWidth = 5;
      ctx.stroke();

      // Arco azul que muestra el angulo
      ctx.beginPath();
      ctx.arc(cx, cy, 40, 0, angleRad, false);
      ctx.strokeStyle = '#3498db';
      ctx.lineWidth = 4;
      ctx.stroke();
    }

    function randomAngle() {
      // √Ångulo aleatorio entre 1 y 360
      return Math.floor(Math.random() * 360) + 1;
    }

    function getCalificacion(diff) {
      if (diff <= 5) return "¬°Muy caliente!";
      if (diff <= 15) return "Caliente";
      if (diff <= 30) return "Fr√≠o";
      return "Muy fr√≠o";
    }

    function updateAttemptsList() {
  const ul = document.getElementById('attempts');
  ul.innerHTML = '';
  attempts.forEach((att, idx) => {
    const li = document.createElement('li');
    let flecha = '';
    if (att.guess > currentAngle) flecha = '‚Üì';
    else if (att.guess < currentAngle) flecha = '‚Üë';
    else flecha = '‚úîÔ∏è';
    li.innerHTML = `Intento ${idx + 1}: ${att.guess}¬∞ <span style="margin-left:10px; font-size:1.2em;">${flecha}</span> ‚Äî ${att.calificacion}`;
    if (att.calificacion.includes("Muy caliente")) li.style.color = "#e74c3c";
    else if (att.calificacion.includes("Caliente")) li.style.color = "#f39c12";
    else if (att.calificacion.includes("Fr√≠o") && !att.calificacion.includes("Muy")) li.style.color = "#2980b9";
    else if (att.calificacion.includes("Muy fr√≠o")) li.style.color = "#7f8c8d";
    ul.appendChild(li);
  });
}

    function newGame() {
      currentAngle = randomAngle();
      drawAngle(currentAngle);
      document.getElementById('result').textContent = '';
      document.getElementById('guessForm').reset();
      document.getElementById('newAngle').style.display = 'none';
      document.getElementById('guess').disabled = false;
      attempts = [];
      updateAttemptsList();
    }

    document.getElementById('guessForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const guess = parseInt(document.getElementById('guess').value, 10);
      const diff = Math.abs(currentAngle - guess);
      const tolerance = 0; //Aca se puede ajustar la tolerancia, la puse en 0 debido a que ahora hay mas intentos
      const calificacion = getCalificacion(diff);

      attempts.push({ guess, calificacion });
      updateAttemptsList();

      if (diff <= tolerance || Math.abs(currentAngle - guess + 360) <= tolerance || Math.abs(currentAngle - guess - 360) <= tolerance) {
        document.getElementById('result').textContent = `¬°Correcto! El √°ngulo era ${currentAngle}¬∞ üéâ`;
        document.getElementById('newAngle').style.display = 'inline-block';
        document.getElementById('guess').disabled = true;
      } else if (attempts.length >= maxAttempts) {
        document.getElementById('result').textContent = `¬°Se acabaron los intentos! El √°ngulo era ${currentAngle}¬∞.`;
        document.getElementById('newAngle').style.display = 'inline-block';
        document.getElementById('guess').disabled = true;
      } else {
        document.getElementById('result').textContent = `Incorrecto. Te quedan ${maxAttempts - attempts.length} intento(s).`;
      }
      document.getElementById('guessForm').reset();
    });

    document.getElementById('newAngle').addEventListener('click', newGame);
    newGame();
  </script>
</body>

<style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      text-align: center;
      padding-top: 40px;
      background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
      min-height: 100vh;
    }
    h1 {
      color: #2d3e50;
      font-size: 2.2em;
      margin-bottom: 10px;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px #b0c4de;
    }
    p {
      color: #34495e;
      font-size: 1.1em;
      margin: 8px 0;
    }
    #canvas {
      margin: 20px auto;
      display: block;
      background: #ffffff;
      border-radius: 50%;
      box-shadow: 0 0 18px #b0c4de;
      border: 2px solid #3498db;
      transition: box-shadow 0.3s;
    }
    .result {
      margin-top: 20px;
      font-size: 1.3em;
      font-weight: bold;
      color: #2980b9;
      min-height: 32px;
      transition: color 0.3s;
    }
    input[type="number"] {
      width: 80px;
      font-size: 1em;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #3498db;
      margin-top: 8px;
      margin-bottom: 8px;
      box-shadow: 0 1px 4px #b0c4de;
      outline: none;
      transition: border-color 0.2s;
    }
    input[type="number"]:focus {
      border-color: #2980b9;
    }
    button {
      font-size: 1em;
      padding: 7px 20px;
      margin-left: 10px;
      cursor: pointer;
      background: linear-gradient(90deg, #3498db 60%, #6dd5fa 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      box-shadow: 0 2px 8px #b0c4de;
      transition: background 0.2s, box-shadow 0.2s;
    }
    button:hover {
      background: linear-gradient(90deg, #2980b9 60%, #3498db 100%);
      box-shadow: 0 4px 16px #b0c4de;
    }
    #attempts {
      margin: 24px auto 0 auto;
      padding: 0;
      max-width: 340px;
      text-align: left;
    }
    #attempts li {
      background: #f7fbff;
      border-left: 6px solid #3498db;
      margin-bottom: 10px;
      padding: 10px 16px;
      border-radius: 6px;
      font-size: 1.08em;
      box-shadow: 0 1px 6px #b0c4de;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: fadeIn 0.5s;
    }
    #attempts li:nth-child(odd) {
      background: #eaf6ff;
    }
    /* Colores para calificaciones */
    #attempts li:contains("Muy caliente") { color: #e74c3c; }
    #attempts li:contains("Caliente") { color: #f39c12; }
    #attempts li:contains("Fr√≠o") { color: #2980b9; }
    #attempts li:contains("Muy fr√≠o") { color: #7f8c8d; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px);}
      to { opacity: 1; transform: translateY(0);}
    }
</style>
  
</html>